<!-- 死锁 -->

现有两个用户user1, user2
user1 和 user2都需要两个资源 a,b
user1先拿到了a
user2先拿到了b

此时 user1 正在等到获取b， user2 正在等待获取 a
这就形成了死锁

<!-- 形成死锁的四个条件 -->
1.互斥使用
  一个资源被一个线程使用时，别的资源不能使用
2.不可抢占
  资源请求者不能强制从资源占有者中抢占资源
3.占有且等待
  在请求别的资源时，保持对现有资源的占有
4.循环等待
  线程1和线程2 互相等待对方占有的资源，形成一个环路

<!-- 如何预防 -->
只要破坏一个条件就可以
1.破坏占有且等待： 
  一次性请求资源，如果无法请求完毕，就等待能够一次请求的时候
2.破坏不可抢占
  如果无法获取资源，就主动释放自己占有的资源
3.破坏循环等待
  线性化申请资源
  如我要申请1
  a占有5
  b占有3
  所以b能申请到1
  先申请序号较大的资源

<!-- https://www.bilibili.com/video/BV1Nx411X7hT?from=search&seid=2110061170043757627 -->
<!-- 银行家算法 -->