<<<<<<< HEAD

在 HTTP/1 中，每次请求都会建立一次HTTP连接，也就是我们常说的3次握手4次挥手，这个过程在一次请求过程中占用了相当长的时间，即使开启了 Keep-Alive ，解决了多次连接的问题，但是依然有两个效率上的问题：

第一个：串行的文件传输。当请求a文件时，b文件只能等待，等待a连接到服务器、服务器处理文件、服务器返回文件，这三个步骤。我们假设这三步用时都是1秒，那么a文件用时为3秒，b文件传输完成用时为6秒，依此类推。（注：此项计算有一个前提条件，就是浏览器和服务器是单通道传输）
第二个：连接数过多。我们假设Apache设置了最大并发数为300，因为浏览器限制，浏览器发起的最大请求数为6，也就是服务器能承载的最高并发为50，当第51个人访问时，就需要等待前面某个请求处理完成。
HTTP/2的多路复用就是为了解决上述的两个性能问题。
在 HTTP/2 中，有两个非常重要的概念，分别是帧（frame）和流（stream）。
帧代表着最小的数据单位，每个帧会标识出该帧属于哪个流，流也就是多个帧组成的数据流。
多路复用，就是在一个 TCP 连接中可以存在多条流。换句话说，也就是可以发送多个请求，对端可以通过帧中的标识知道属于哪个请求。通过这个技术，可以避免 HTTP 旧版本中的队头阻塞问题，极大的提高传输性能。

##一、流和多路复用的关系

####1.流的概念
  流(Stream)， 服务器和客户端在HTTP2连接内用于交换 “帧” 数据的独立双向序列，逻辑上可看作一个较为完整的交互处理单元，即： 一次完整的资源请求-响应数据交换流程。
  
  一个业务处理单元，在一个流内的进行处理完毕， 这个流的生命周期完结。
#####特点：
  1）一个HTTP2连接可同时保持多个打开的流， 通过任一端点交换帧
  2）流可被 客户端 和 服务器端 单独或共享创建和使用
  3）流可被任一端关闭
  4）在流内接受和发送数据都必须要按照顺序
  5）流的标识符用自然数表示， $1$ ~ $2^{31}-1$ 区间， 由创建流的一端分配
  6）流与流之间的逻辑是并行的、独立的

####2.多路复用
  流的概念的提出是为了实现多路复用，在单个连接上（HTTP1 是建立一个进行一次交换然后结束）实现同时进行多个业务单元的传输。
![流](http://www.blogjava.net/images/blogjava_net/yongboy/Windows-Live-Writer/5264ea818301_D4ED/one_http2_connection_thumb_1.png)
#####实际情况如下：

![实际](http://www.blogjava.net/images/blogjava_net/yongboy/Windows-Live-Writer/5264ea818301_D4ED/http2_multiplexing_real_thumb.png)
不同颜色的帧数据代表不同的业务 通过特定的标识符来进行分别

=======

在 HTTP/1 中，每次请求都会建立一次HTTP连接，也就是我们常说的3次握手4次挥手，这个过程在一次请求过程中占用了相当长的时间，即使开启了 Keep-Alive ，解决了多次连接的问题，但是依然有两个效率上的问题：

第一个：串行的文件传输。当请求a文件时，b文件只能等待，等待a连接到服务器、服务器处理文件、服务器返回文件，这三个步骤。我们假设这三步用时都是1秒，那么a文件用时为3秒，b文件传输完成用时为6秒，依此类推。（注：此项计算有一个前提条件，就是浏览器和服务器是单通道传输）
第二个：连接数过多。我们假设Apache设置了最大并发数为300，因为浏览器限制，浏览器发起的最大请求数为6，也就是服务器能承载的最高并发为50，当第51个人访问时，就需要等待前面某个请求处理完成。
HTTP/2的多路复用就是为了解决上述的两个性能问题。
在 HTTP/2 中，有两个非常重要的概念，分别是帧（frame）和流（stream）。
帧代表着最小的数据单位，每个帧会标识出该帧属于哪个流，流也就是多个帧组成的数据流。
多路复用，就是在一个 TCP 连接中可以存在多条流。换句话说，也就是可以发送多个请求，对端可以通过帧中的标识知道属于哪个请求。通过这个技术，可以避免 HTTP 旧版本中的队头阻塞问题，极大的提高传输性能。

##一、流和多路复用的关系

####1.流的概念
  流(Stream)， 服务器和客户端在HTTP2连接内用于交换 “帧” 数据的独立双向序列，逻辑上可看作一个较为完整的交互处理单元，即： 一次完整的资源请求-响应数据交换流程。
  
  一个业务处理单元，在一个流内的进行处理完毕， 这个流的生命周期完结。
#####特点：
  1）一个HTTP2连接可同时保持多个打开的流， 通过任一端点交换帧
  2）流可被 客户端 和 服务器端 单独或共享创建和使用
  3）流可被任一端关闭
  4）在流内接受和发送数据都必须要按照顺序
  5）流的标识符用自然数表示， $1$ ~ $2^{31}-1$ 区间， 由创建流的一端分配
  6）流与流之间的逻辑是并行的、独立的

####2.多路复用
  流的概念的提出是为了实现多路复用，在单个连接上（HTTP1 是建立一个进行一次交换然后结束）实现同时进行多个业务单元的传输。
![流](http://www.blogjava.net/images/blogjava_net/yongboy/Windows-Live-Writer/5264ea818301_D4ED/one_http2_connection_thumb_1.png)
#####实际情况如下：

![实际](http://www.blogjava.net/images/blogjava_net/yongboy/Windows-Live-Writer/5264ea818301_D4ED/http2_multiplexing_real_thumb.png)
不同颜色的帧数据代表不同的业务 通过特定的标识符来进行分别

>>>>>>> a348e00a339fc4441684e34028cd39c7cf1d6d28
详情： https://blog.csdn.net/weixin_34255793/article/details/86208360